<!DOCTYPE HTML>
<html>
    <head>
        <title>Find your Friends</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

        <link rel="stylesheet" href="css/map.css"/>

        <script src="https://unpkg.com/vue"></script>
        <script src="https://unpkg.com/lodash"></script>
        <script src="js/lib/vue-google-maps.js"></script>
        <script src="js/lib/vue-spinner.js"></script>
    </head>

    <body>
        <div id="root">
            <ring-loader :loading="!mapReady">
                <!--:color="black" not working-->
                <!--:size="" not working -->
            </ring-loader>
            <gmap-map v-if="mapReady"
                      :center="center"
                      :zoom="7">
                <gmap-marker v-for="marker in markerList" :position="marker.position"
                             :clickable="true"
                             :draggable="false">
                </gmap-marker>
            </gmap-map>
        </div>
    </body>
    <script>
        Vue.use(VueGoogleMaps, {
            load: {
                key: 'AIzaSyB61sCvOkrvTlAioaf43fFB1MI7rQxntYM',
//                v: 'OPTIONAL VERSION NUMBER',
//                libraries: 'places', //// If you need to use place input
            }
        });
        Vue.component('ring-loader', VueSpinner.RingLoader);
        new Vue({
            el: '#root',
            data() {
                return {
                    center: {
                        // Poland geolocation
                        lat: 51.9194,
                        lng: 19.1451
                    },
                    markerPosition: {
                        lat: 51.9194,
                        lng: 19.1451
                    },
                    mapReady: false,
                    markerList: [{position: {}}, {position: {}}]
                }
            },
            mounted() {
                const vue = this
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(function (position) {
                        vue.center = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        vue.mapReady = true
                    }, function () {/* on error */
                        vue.mapReady = true
                    });
                }
            }
        });
    </script>

</html>
