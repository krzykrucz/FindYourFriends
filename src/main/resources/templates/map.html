<!DOCTYPE HTML>
<html>
    <head>
        <title>Find your Friends</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

        <link rel="stylesheet" href="css/map.css"/>

        <script src="https://unpkg.com/vue"></script>
        <script src="https://unpkg.com/lodash"></script>
        <script src="js/lib/vue-google-maps.js"></script>
        <script src="js/lib/vue-spinner.js"></script>
        <script type="text/javascript" src="js/borders.js"></script>
    </head>

    <body>
        <div id="root">
            <div v-if="!mapReady">
                <clip-loader :loading="!mapReady"
                             :color="loaderColor">
                </clip-loader>
                <div class="spinner-text">
                    Please wait...
                </div>
            </div>
            <gmap-map v-else
                      :center="center"
                      :zoom="7">
                <gmap-marker :position="markerPosition"
                             :clickable="true"
                             :draggable="false"
                             @mouseover="markerHovered=true"
                             @mouseout="markerHovered=false"
                             @click="center=markerPosition">
                    <gmap-info-window :opened="markerHovered"
                                      :content="markerContent">
                    </gmap-info-window>
                </gmap-marker>
                <gmap-polygon :path="path">
                </gmap-polygon>
            </gmap-map>
        </div>
    </body>
    <script>
        Vue.use(VueGoogleMaps, {
            load: {
                key: 'AIzaSyB61sCvOkrvTlAioaf43fFB1MI7rQxntYM',
//                libraries: 'places', //// If you need to use place input
            }
        });
        Vue.component('clip-loader', VueSpinner.ClipLoader);
        new Vue({
            el: '#root',
            data() {
                return {
                    center: {
                        // Poland geolocation
                        lat: 51.9194,
                        lng: 19.1451
                    },
                    markerPosition: {
                        lat: 51.9194,
                        lng: 19.1451
                    },
                    mapReady: false,
                    path: [paris],
                    loaderColor: '#acacac',
                    markerHovered: false,
                    markerContent: 'Some city'
                }
            },
            mounted() {
                const vue = this
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(function (position) {
                        vue.center = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        vue.mapReady = true
                    }, function () {/* on error */
                        vue.mapReady = true
                    });
                }
            }
        });
    </script>

</html>
